/** @format */

import React, { useCallback, useEffect, useState } from "react";
import { StyleSheet, Text, View } from "react-native";
import Entypo from "@expo/vector-icons/Entypo";
import * as SplashScreen from "expo-splash-screen";
import * as Font from "expo-font";
import Svg, { Path } from "react-native-svg";
import { useNavigation } from "@react-navigation/native";

// Keep the splash screen visible while we fetch resources
SplashScreen.preventAutoHideAsync();

export default function App() {
  const navigation = useNavigation();
  const [appIsReady, setAppIsReady] = useState(false);

  useEffect(() => {
    async function prepare() {
      try {
        await Font.loadAsync(Entypo.font);
        await new Promise((resolve) => setTimeout(resolve, 500));
      } catch (e) {
        console.warn(e);
      } finally {
        setAppIsReady(true);
      }
    }

    prepare();
  }, []);

  const onLayoutRootView = useCallback(async () => {
    if (appIsReady) {
      await SplashScreen.hideAsync();
      console.log("hi");
      setTimeout(() => {
        navigation.replace("Login");
      }, 3000);
    }
  }, [appIsReady]);

  if (!appIsReady) {
    return null;
  }

  const styles = StyleSheet.create({
    container: {
      flex: 1,
      flexDirection: "column",
      backgroundColor: "#E5CAB5",
      opacity: 0.8,
      justifyContent: "center",
      alignItems: "center",
    },
    text: {
      color: "#40220B",
      opacity: 0.55,
      fontSize: 16,
      fontWeight: "bold",
      textAlign: "center",
      paddingTop: 16,
    },
  });

  return (
    <View style={styles.container} onLayout={onLayoutRootView}>
      <Svg
        width="116"
        height="31"
        viewBox="0 0 116 31"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <Path
          d="M0.832 30V0.0479994H19.168V3.024H4V12.864H16.528V15.936H4V27.024H19.024V30H0.832ZM34.048 30.48C30.336 30.48 27.232 29.328 24.736 27.024L26.656 23.76L26.944 23.328L27.232 23.52C27.296 23.776 27.36 24.048 27.424 24.336C27.52 24.592 27.744 24.912 28.096 25.296C28.768 25.968 29.568 26.528 30.496 26.976C31.456 27.392 32.672 27.6 34.144 27.6C35.904 27.6 37.264 27.296 38.224 26.688C39.216 26.048 39.712 25.184 39.712 24.096C39.712 23.168 39.296 22.4 38.464 21.792C37.664 21.184 36.24 20.544 34.192 19.872C31.664 19.136 29.648 18.224 28.144 17.136C26.672 16.048 25.936 14.688 25.936 13.056C25.936 11.392 26.608 10.064 27.952 9.072C29.328 8.048 31.344 7.536 34 7.536C36.048 7.536 37.744 7.824 39.088 8.4C40.432 8.976 41.648 9.84 42.736 10.992L40.768 13.392L40.432 13.776L40.192 13.536C40.16 13.28 40.08 13.04 39.952 12.816C39.856 12.56 39.632 12.256 39.28 11.904C38.544 11.328 37.712 10.896 36.784 10.608C35.856 10.288 34.96 10.128 34.096 10.128C32.816 10.128 31.712 10.352 30.784 10.8C29.856 11.248 29.392 11.936 29.392 12.864C29.392 13.344 29.552 13.824 29.872 14.304C30.224 14.752 30.848 15.216 31.744 15.696C32.64 16.144 33.92 16.608 35.584 17.088C38.336 17.92 40.272 18.832 41.392 19.824C42.544 20.784 43.12 22.048 43.12 23.616C43.12 24.832 42.784 25.968 42.112 27.024C41.472 28.08 40.48 28.928 39.136 29.568C37.792 30.176 36.096 30.48 34.048 30.48ZM60.352 30.336C58.464 30.336 57.024 29.904 56.032 29.04C55.072 28.176 54.432 26.848 54.112 25.056C53.792 23.232 53.68 20.912 53.776 18.096L54.064 10.896H49.36V8.064H54.16L54.352 2.448L57.952 2.016L58.432 1.968L58.48 2.304C58.32 2.528 58.176 2.752 58.048 2.976C57.952 3.2 57.872 3.584 57.808 4.128L57.472 8.064H65.152V10.896H57.52L57.184 18.336C57.088 20.768 57.152 22.656 57.376 24C57.6 25.312 58 26.224 58.576 26.736C59.152 27.216 59.92 27.456 60.88 27.456C61.936 27.456 62.864 27.248 63.664 26.832C64.496 26.416 65.36 25.888 66.256 25.248L67.312 27.984C66.224 28.784 65.104 29.376 63.952 29.76C62.8 30.144 61.6 30.336 60.352 30.336ZM83.056 30.48C79.856 30.48 77.264 29.504 75.28 27.552C73.328 25.6 72.352 22.784 72.352 19.104C72.352 16.608 72.8 14.512 73.696 12.816C74.624 11.088 75.84 9.776 77.344 8.88C78.88 7.984 80.576 7.536 82.432 7.536C84.096 7.536 85.6 7.904 86.944 8.64C88.288 9.376 89.36 10.512 90.16 12.048C90.96 13.584 91.36 15.552 91.36 17.952C91.36 18.208 91.344 18.48 91.312 18.768C91.312 19.024 91.296 19.28 91.264 19.536H75.664C75.792 22.352 76.576 24.416 78.016 25.728C79.488 27.04 81.2 27.696 83.152 27.696C85.456 27.696 87.344 26.88 88.816 25.248L90.736 27.12C88.88 29.36 86.32 30.48 83.056 30.48ZM75.808 16.848H87.856C87.856 14.8 87.328 13.184 86.272 12C85.248 10.784 83.888 10.176 82.192 10.176C80.688 10.176 79.328 10.72 78.112 11.808C76.896 12.864 76.128 14.544 75.808 16.848ZM107.056 30.48C103.856 30.48 101.264 29.504 99.28 27.552C97.328 25.6 96.352 22.784 96.352 19.104C96.352 16.608 96.8 14.512 97.696 12.816C98.624 11.088 99.84 9.776 101.344 8.88C102.88 7.984 104.576 7.536 106.432 7.536C108.096 7.536 109.6 7.904 110.944 8.64C112.288 9.376 113.36 10.512 114.16 12.048C114.96 13.584 115.36 15.552 115.36 17.952C115.36 18.208 115.344 18.48 115.312 18.768C115.312 19.024 115.296 19.28 115.264 19.536H99.664C99.792 22.352 100.576 24.416 102.016 25.728C103.488 27.04 105.2 27.696 107.152 27.696C109.456 27.696 111.344 26.88 112.816 25.248L114.736 27.12C112.88 29.36 110.32 30.48 107.056 30.48ZM99.808 16.848H111.856C111.856 14.8 111.328 13.184 110.272 12C109.248 10.784 107.888 10.176 106.192 10.176C104.688 10.176 103.328 10.72 102.112 11.808C100.896 12.864 100.128 14.544 99.808 16.848Z"
          fill="#5A3315"
        />
      </Svg>
      <Text style={styles.text}>Your favorite beauty assistant.</Text>
    </View>
  );
}
